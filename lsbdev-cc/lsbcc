#!/bin/bash

libs="-Wl,--dynamic-linker=/lib/ld-lsb.so.1 $* -lc /usr/lib/libc_nonshared.a"
opts=""
target=""

libgcc=`gcc -print-libgcc-file-name`
gccbasedir=`dirname $libgcc`

while getopts "EcI:D:U:O:f:W:I:Sp:o:s:L:" OPT ; do
	case "$OPT" in
		E)
			libs=$*;
			;;
		c)
			libs=$*;
			;;
		o)
			target="-o $OPTARG";
			;;
		I|L|O|U|W|f|p|s)
			opts="$opts -$OPT$OPTARG";
			;;
		D)
			opts="$opts -$OPT$OPTARG";
			;;
		':')
			echo "Can't handle option $OPTARG";
			exit 1;
			;;
		'?')
			echo "Can't handle option";
			exit 1;
			;;
		*)
			opts="$opts -$OPT $OPTARG";
			;;
	esac
done

exec gcc $target $opts -nostdinc -I/usr/lsb/include -I$gccbasedir/include \
	-nodefaultlibs -L$gccbasedir -L/usr/lsb/lib -L/lib -L/usr/lib \
	$libs

